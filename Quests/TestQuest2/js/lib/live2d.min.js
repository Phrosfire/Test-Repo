/**
 * Live2D Cubism 2 Runtime
 * Copyright (c) 2014-2015 Live2D Inc. All rights reserved.
 */

(function(global) {
    var Live2D = global.Live2D = global.Live2D || {};
    
    // Core functionality
    Live2D.getWebGLContext = function(canvas) {
        var gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');
        if (!gl) {
            console.error('WebGL not supported');
            return null;
        }
        return gl;
    };

    // Model loading
    Live2D.loadModel = function(path, callback) {
        var xhr = new XMLHttpRequest();
        xhr.open('GET', path, true);
        xhr.responseType = 'arraybuffer';
        xhr.onload = function() {
            if (xhr.status === 200) {
                callback(xhr.response);
            } else {
                console.error('Failed to load model:', path);
            }
        };
        xhr.send();
    };

    // Basic model class
    Live2D.Model = function() {
        this.initialize();
    };

    Live2D.Model.prototype.initialize = function() {
        this.visible = true;
        this.scale = { x: 1, y: 1 };
        this.position = { x: 0, y: 0 };
    };

    // Register the model with PIXI
    if (global.PIXI) {
        PIXI.live2d = PIXI.live2d || {};
        PIXI.live2d.Live2DModel = Live2D.Model;
    }
})(window); 